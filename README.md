# Clone repository
```bash
git clone https://github.com/miketheologitis/TFD-FedL-Sync-FDA
```
Materialize LFS files (deep pre-trained models ~2GB).
```bash
git lfs fetch --all
```
```bash
git lfs pull
```
# WorkFlow
1. Using the `create_combinations.py` script, create all the experiments you want to run.
2. Simulate the experiments you created utilizing GPUs, in **SLURM**, in a local machine, or in a server cluster provided they are visible to `nvidia-smi`.

## 1. Combination Script

### Example
Go to project directory `/TFD-FedL-Sync-FDA` and create a combinations file:
```bash
python -m fdavg.utils.create_combinations --ds_name MNIST --b 32 --e 100 --strat_name linear sketch --nn ConvNeXtLarge --th 25 50 100 150 --num_replicas 12 --walltime 10:00:00 --comb_file_id 0 --slurm
```
**Output:**
```
OK! Created 8 combinations in 0.json, i.e., `n_sims` = 8.
```
**Help**:
```shell
python -m fdavg.utils.create_combinations --help
```

## 2. Run
Be careful to use the same `--comb_file_id` for both scripts and use the same number of simulations (`--n_sims`) 
as the number of combinations generated by the combinations script.
### Local
**Example**: Go to project directory `/TFD-FedL-Sync-FDA` and run the following command:
```bash
python -m submitter --comb_file_id 0
```
**Help**:
```shell
python -m submitter --help
```
